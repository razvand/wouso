{% extends 'interface/section_base.html'%}

{% load i18n %}

{% block sectiontitle %}
	{% trans 'Messages' %}

	<div class="create-message-btn">
		<a href="{% url create %}">
			<button type="submit" class="btn btn-success">{% trans 'Compose' %}</button>
		</a>
	</div>

 {% endblock %}

{% block sectioncontent %}

	<div role="tabpanel">
		<ul class="nav nav-tabs nav-justified" role="tablist">
			<li role="presentation" class="active">
				<a href="#tab-received" role="tab" data-toggle="tab">{% trans 'Received' %}</a>
			</li>
			<li role="presentation">
				<a href="#tab-sent" role="tab" data-toggle="tab">{% trans 'Sent' %}</a>
			</li>
			<li role="presentation">
				<a href="#tab-all" role="tab" data-toggle="tab">{% trans 'All' %}</a>
			</li>
		</ul>
	<div class="tab-content">
		<div id="tab-received" class="tab-pane active" role="tabpanel">
			<table id="{% trans 'Messages' %}" class="table table-striped table-hover">
				<tr>
					<th>{% trans 'From' %}</td>
					<th>{% trans 'To' %}</td>
					<th>{% trans 'Subject' %}</td>
				{% for msg in messages_rec %}
					<tr>
						<td>{% if msg.sender %}{{msg.sender}}{% else %}{% trans 'System' %}{% endif %}</td>
						<td>{{msg.receiver}}</td>
						<td>{{msg.subject}}</td>
					</tr>
				{% empty %} <tr> <td colspan=3>{% trans 'No messages.' %}</td></tr>
				{% endfor %}
			</table>
		</div>

		<div id="tab-sent" class="tab-pane" role="tabpanel">
			<table id="{% trans 'Messages' %}" class="table table-striped table-hover">
				<tr>
					<th>{% trans 'From' %}</td>
					<th>{% trans 'To' %}</td>
					<th>{% trans 'Subject' %}</td>
				</tr>
				{% for msg in messages_sent %}
					<tr>
						<td>{% if msg.sender %}{{msg.sender}}{% else %}{% trans 'System' %}{% endif %}</td>
						<td>{{msg.receiver}}</td>
						<td>{{msg.subject}}</td>
					</tr>
				{% empty %} <tr> <td colspan=3>{% trans 'No messages.' %}</td></tr>
				{% endfor %}
			</table>
		</div>

		<div id="tab-all" class="tab-pane" role="tabpanel">
			<table id="{% trans 'Messages' %}" class="table table-striped table-hover">
				<tr>
					<th>{% trans 'From' %}</td>
					<th>{% trans 'To' %}</td>
					<th>{% trans 'Subject' %}</td>
				</tr>
				{% for msg in messages_all %}
					<tr>
						<td>{% if msg.sender %}{{msg.sender}}{% else %}{% trans 'System' %}{% endif %}</td>
						<td>{{msg.receiver}}</td>
						<td>{{msg.subject}}</td>
					</tr>
				{% empty %} <tr> <td colspan=3>{% trans 'No messages.' %}</td></tr>
				{% endfor %}
			</table>
		</div>
	</div>

{% endblock %}
